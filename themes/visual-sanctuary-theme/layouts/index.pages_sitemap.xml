{{ printf "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>" | safeHTML }}
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  {{/* Include homepage */}}
  <url>
    <loc>{{ .Site.BaseURL }}</loc>
    <lastmod>{{ now.Format "2006-01-02T15:04:05-07:00" }}</lastmod>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  {{/* Include regular pages that are not in content sections (about, contact, privacy, terms) */}}
  {{ range .Site.Pages }}
    {{/* Include pages that are regular pages (not sections) and have empty section (root level) */}}
    {{ if and (eq .Kind "page") (eq .Section "") }}
      {{- $htmlFormat := .OutputFormats.Get "HTML" -}}
      <url>
        <loc>{{ with $htmlFormat }}{{ .Permalink }}{{ end }}</loc>
        <lastmod>{{ if .Lastmod }}{{ .Lastmod.Format "2006-01-02T15:04:05-07:00" }}{{ else }}{{ .Date.Format "2006-01-02T15:04:05-07:00" }}{{ end }}</lastmod>
        {{ with .Sitemap.ChangeFreq }}
        <changefreq>{{ . }}</changefreq>
        {{ else }}
        <changefreq>monthly</changefreq>
        {{ end }}
        {{ if ge .Sitemap.Priority 0.0 }}
        <priority>{{ .Sitemap.Priority }}</priority>
        {{ else }}
        <priority>0.8</priority>
        {{ end }}
      </url>
    {{ end }}
  {{ end }}
  {{/* Include top-level section index pages (categories like /animals/, /flowers/, etc.) */}}
  {{ range .Site.Sections }}
    {{ if ne .Section "pages" }}
      {{- $htmlFormat := .OutputFormats.Get "HTML" -}}
      <url>
        <loc>{{ with $htmlFormat }}{{ .Permalink }}{{ end }}</loc>
        <lastmod>{{ .Date.Format "2006-01-02T15:04:05-07:00" }}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>0.9</priority>
      </url>
    {{ end }}
  {{ end }}
</urlset>

